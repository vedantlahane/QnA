define host {
    use             linux-server
    host_name       {{ axon_backend_host }}
    alias           Axon Backend Server
    address         {{ axon_backend_address }}
}

define service {
    use                     generic-service
    host_name               {{ axon_backend_host }}
    service_description     Gunicorn TCP Port
    check_command           check_tcp!{{ axon_backend_port }}
    check_interval          1
    retry_interval          1
}

define service {
    use                     generic-service
    host_name               {{ axon_backend_host }}
    service_description     Gunicorn HTTP Health
    check_command           check_http!-H {{ axon_backend_address }} -p {{ axon_backend_port }} -u {{ axon_backend_health_endpoint }} -w 5 -c 10
    check_interval          1
    retry_interval          1
}
